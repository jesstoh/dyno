<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include("../partials/head.ejs") %>
        <link rel="stylesheet" href="/css/posts.css">
        <script src="/js/posts.js"></script>
    </head>
    <body>
        <header>
            <%- include("../partials/nav.ejs") %>
        </header>
        <main>
            <%- include("../partials/main.ejs") %>

            <div class="container post-container section">
                <div class="row">
                    <% posts.forEach(post => { %>
                        <div class="col s12 m6 l4">
                            <div class="card hoverable medium post-card">
                                <div class="card-image">
                                    <% if (post.img) {%>
                                        <img src="<%=post.img%>" class="materialboxed">
                                    <%} else {%>
                                        <div class="video-container materialboxed">
                                            <!-- <video src="<%=post.video%>" width="100%"></video> -->
                                            <iframe src="<%=post.video%>" frameborder="0" allowfullscreen></iframe>
                                        </div>
                                        
                                    <%}%>
                                </div>
                                <div class="card-content">
                                    <a href="/posts/<%=post._id%>" class="post-link"></a>
                                    <span>Likes: <%=post.likes.length%></span>
                                    <span>Author: <a href="/users/<%=post.author%>"><%=post.author%></a></span><br>
                                    
                                    <span>location: <%=post.location%></span>
                                    
                                    <p><%=post.description%></p>
                                    <span>tags: <%=post.tags%></span><br>
                                    <span class="grey-text"><%=post.createdAt%></span>
                                </div>
                            </div>
                        </div>
                                
                    <%})%>
                    
                </div>
            </div>

        </main>
        <footer>
            <%- include("../partials/footer.ejs") %>
        </footer>
        
    </body>
</html>